# Ieum 책 모바일 웹 사이트

책을 좋아하는 사람, 책을 찾는 사람들이 서로 책에 대한 의견을 나누고 그 의견을 
통해 책을 고를 때 도움을 받을 수 있는 앱을 만들고 싶었습니다.

## 목차

📝 [개요](#-개요)

🔗 [배포 사이트](#-배포-사이트)

💡 [주요기능](#-주요기능)

💻 [기술 스택](#-기술-스택)

📖 [담당한 페이지](#-담당한-페이지)

🔧 [담당한 기능](#-담당한-기능)

🚀 [트러블 슈팅](#-트러블-슈팅)

## 📝 개요

* 책을 좋아하는 사람들이 자유롭게 활동하고, 책을 검색할 수 있는 모바일 웹 커뮤니티를 목표로 시작하였습니다.
* React와 Next.js를 활용하여 프론트엔드를 개발하고, Firestore를 사용하여 실시간 데이터베이스를 구축했습니다.
* 알라딘 API를 활용하여 베스트셀러, 신작, 도서 검색 기능을 구현하였으며, Firestore와 NextAuth를 통해 북마크 및 리뷰, 로그인 기능을 제공하고 있습니다.

## 🔗 배포 사이트

[이음](https://ieum-hong.vercel.app/)



## 💡 주요기능

* <strong>도서 검색</strong>
  * 알라딘 API를 활용하여 베스트셀러, 신작, 특정 도서를 검색할 수 있습니다. 사용자는 책의 제목, 저자 등을 기준으로 도서를 검색할 수 있습니다.

* <strong>북마크</strong> 
  * 사용자는 관심 있는 도서를 북마크하여 나중에 쉽게 찾을 수 있습니다. 북마크한 도서는 개인화된 목록에 저장됩니다.

* <strong>리뷰 작성</strong> 
  * 도서에 대해 리뷰를 작성하고, 다른 사용자의 리뷰를 볼 수 있습니다.

* <strong>회원가입 및 로그인</strong>
  *  NextAuth를 사용하여 로그인 기능을 제공합니다.
  *  사용자는 회원가입 또는 소셜 로그인을 통해 쉽게 가입하고 로그인할 수 있습니다.

## 💻 기술 스택

* NextJS
* React
* Zustand
* Nextauth
* 알라딘 API ([API 홈페이지](https://blog.aladin.co.kr/openapi/category/29154404?communitytype=MyPaper>))
* firestore

## 📖 담당한 페이지  

* 회원가입
* 아이디 찾기
* 로그인
* 마이페이지

## 🔧 담당한 기능 

* **NextAuth를 활용한 소셜 로그인**
  * 구글, 페이스북 등의 소셜 로그인을 구현하여 사용자가 외부 인증을 통해 쉽게 로그인할 수 있도록 했습니다.
     
* **커스텀 로그인 및 회원가입**
  * 사용자 로그인 및 회원가입 기능을 구현하였습니다.
     
* **아이디 찾기**
  * 자체 회원가입 사용자가 이메일을 통해 아이디를 찾을 수 있는 기능을 추가했습니다.
     
* **회원정보 수정**
  * 사용자가 자신의 정보를 수정할 수 있도록 회원정보 수정 기능을 구현했습니다.
     
* **코멘트 작성**
  * 사용자가 도서에 대해 코멘트를 작성하고 저장할 수 있는 기능을 구현했습니다.
     
* **Firestore 데이터베이스 구축**
  * Firestore를 사용하여 사용자 정보, 리뷰, 코멘트, 북마크 등 다양한 데이터를 저장하고 관리하는 시스템을 구축했습니다.
     
* **마이페이지 북마크 삭제 기능**
  * 사용자가 마이페이지에서 북마크한 도서를 삭제할 수 있도록 기능을 구현했습니다.

## 🚀 트러블 슈팅

1. **북마크 아이콘 색상 반영 문제**

    문제<br>
    사용자가 북마크 아이콘을 클릭하여 북마크를 추가했을 때, 아이콘 색상이 즉시 반영되지 않는 문제가 발생했습니다. 북마크 상태가 변했음에도 불구하고 새로고침을 하지 않으면 UI에 변화가 없었습니다.
    
    해결 방법<br>
    이 문제는 상태(State)가 즉시 반영되지 않아 발생한 문제였습니다. 이를 해결하기 위해, **React**의 **state**를 사용하여 아이콘 클릭 시 상태 값(true/false)을 반전시키도록 하였습니다.<br> 
    이렇게 함으로써 상태가 변경되는 즉시 UI에 반영되도록 구현하였으며, 아이콘의 색상이 즉시 변경되도록 수정했습니다.

2. **SNS 로그인 후 DB에 사용자 정보 저장 문제 및 자체 로그인 오류**

     **문제 : SNS 로그인 후 DB에 사용자 정보가 저장되지 않음**<br>
     NextAuth를 사용하여 SNS 로그인을 구현했으나, 로그인 상태는 정상적으로 유지되었지만, DB에 사용자의 정보가 저장되지 않는 문제가 발생했습니다.<br>
     이는 NextAuth의 기본 설정에서 사용자 정보 저장을 자동으로 처리하지 않기 때문에 발생한 문제였습니다.

     **해결 방법**<br>
    이를 해결하기 위해, NextAuth의 signIn 함수를 수정하여 SNS 로그인 시 사용자의 정보가 DB에 저장되어있지 않으면 자동으로 저장하도록 처리했습니다.<br>
    이 과정에서 signIn 함수 내에서 사용자 정보를 확인하고, DB에 데이터를 추가하는 로직을 구현했습니다.

   **문제 해결 후 다시 트러블 발생**<br>
   **문제 2: signIn 함수 수정 후 자체 로그인 기능 에러 발생**<br>
   signIn 함수를 수정하여 SNS 로그인 후 DB에 데이터를 저장하게 했지만, 이로 인해 커스텀 로그인 시스템(자체 로그인)이 정상적으로 작동하지 않는 에러가 발생했습니다.<Br>
   원인은 signIn 함수 수정으로 인해 NextAuth가 자동으로 처리하던 자체 로그인 기능이 제대로 작동하지 않아서 발생한 문제였습니다.


